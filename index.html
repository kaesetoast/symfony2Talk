<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Symfony2</title>
	<script src="../../lib/pik.js"></script>
	<!-- Important - do not remove or rename! -->
	<link rel="stylesheet" href="style.css">
	<!-- Change theme here -->
	<script src="google-code-prettify/prettify.js"></script>
	<script type="text/javascript">
		window.addEvent('domready', function () {
			document.id('total-slides').set("text", pik.slides.length);
			document.id('current-slide').set("text", window.parent.pik.getCurrent() + 1);
		});
		window.parent.addEvent('hashchange', function () {
			window.document.id('current-slide').set("text", window.parent.pik.getCurrent() + 1);
		});
	</script>
</head>
<body onload="prettyPrint()">

<div id="header"></div>

<div id="Pik-hide"></div>
<!-- Important - do not remove or rename! -->

<div id="Pik-presentation-container"> <!-- Important - do not remove or rename! -->

<div class="pik-slide">
	<div class="center">
		<div class="center">
			<img src="assets/symfony-logo.svg" style="width: 20em">
		</div>
	</div>
</div>

<div class="pik-slide">
	<h2>Warum überhaupt ein PHP-Framework?</h2>
	<ul>
		<li>Redundantes Code-Gefrickel wird einem abgenommen.</li>
		<li>Sicherheitsrelevantes wird einem abgenommen.</li>
		<li>PHP ist 'ne Bitch!</li>
	</ul>
</div>

<div class="pik-slide">
	<h2>Warum ist PHP 'ne Bitch?</h2>
	<ul>
		<li>PHP lässt viel unsauberen Code zu.
			<ul>
				<li>Selbst wenn man sich an Patterns hält, neigt man dazu Quick & Dirty zu arbeiten.</li>
				<li>Ein Framework zwingt einen durch seine Architektur oft zu sauberen Lösungen.</li>
			</ul>
		</li>
	</ul>
</div>

<div class="pik-slide">
	<div class="center">
		<div class="center">
			<h1 class="between-title">Architektur</h1>
		</div>
	</div>
</div>

<div class="pik-slide">
	<h2 style="position: absolute">Application Flow</h2>
	<div class="center">
		<div class="center">
			<img src="assets/request-flow.png" style="width: 27em;">
		</div>
	</div>
</div>

<div class="pik-slide">
	<h2 style="position: absolute;">Alles ist ein Bundle</h2>
	<div class="center">
		<div class="center">
			<div style="width: 28em; height: 16em; margin:auto; background-color: red; padding: 0.5em">
				<div style="width: 27em; height: 1.5em; background-color: white">
					AppKernel & Autoloader
				</div>
				<div>
					<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin-top: 0.5em; float: left;"><span style="font-size: 0.4em;">Symfony2\CoreBundle</span></div>
					<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin: 0.5em 0 0 0.5em; float: left;"><span style="font-size: 0.4em">Mammoot\MainBundle</span></div>
					<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin: 0.5em 0 0 0.5em; float: left;"><span style="font-size: 0.4em">Mammoot\GalleryBundle</span></div>
					<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin: 0.5em 0 0 0.5em; float: left;"><span style="font-size: 0.4em">Mammoot\HolodeckBundle</span></div>
					<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin: 0.5em 0 0 0.5em; float: left;"><span style="font-size: 0.4em">Vendor\BeerBundle</span></div>
					<div style="clear: both"></div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="pik-slide">
	<h2 style="position: absolute;">MVC for the win</h2>
	<div class="center">
		<div class="center">
			<img src="assets/mvc.svg" style="width: 29em">
		</div>
	</div>
</div>

<div class="pik-slide">
	<h2 style="position: absolute;">Alles ist ein (MVC-)Bundle</h2>
	<div class="center">
		<div class="center">
			<div style="width: 28em; height: 16em; margin:auto; background-color: red; padding: 0.5em">
				<div style="width: 27em; height: 1.5em; background-color: white">
					AppKernel & Autoloader
				</div>
				<div>
					<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin-top: 0.5em; float: left;"><span style="font-size: 0.4em;">Symfony2\CoreBundle</span><img src="assets/mvc.svg" style="width: 4em"></div>
					<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin: 0.5em 0 0 0.5em; float: left;"><span style="font-size: 0.4em">Mammoot\MainBundle</span><img src="assets/mvc.svg" style="width: 4em"></div>
					<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin: 0.5em 0 0 0.5em; float: left;"><span style="font-size: 0.4em">Mammoot\GalleryBundle</span><img src="assets/mvc.svg" style="width: 4em"></div>
					<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin: 0.5em 0 0 0.5em; float: left;"><span style="font-size: 0.4em">Mammoot\HolodeckBundle</span><img src="assets/mvc.svg" style="width: 4em"></div>
					<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin: 0.5em 0 0 0.5em; float: left;"><span style="font-size: 0.4em">Vendor\BeerBundle</span><img src="assets/mvc.svg" style="width: 4em"></div>
					<div style="clear: both"></div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="pik-slide">
	<h2 style="position: absolute;">Bundles schnell integrieren</h2>
	<div class="center">
		<div class="center">

			<div style="margin: auto; width: 22.5em; text-align: center">
				<div style="font-size: 0.3em; float: left">
					<div style="width: 28em; height: 16em; background-color: red; padding: 0.5em; margin-right: 19em">
						<div style="width: 27em; height: 1.5em; background-color: white">
							AppKernel & Autoloader
						</div>
						<div>
							<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin-top: 0.5em; float: left;"><span style="font-size: 0.4em;">Symfony2\CoreBundle</span><img src="assets/mvc.svg" style="width: 4em"></div>
							<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin: 0.5em 0 0 0.5em; float: left;"><span style="font-size: 0.4em">Mammoot\MainBundle</span><img src="assets/mvc.svg" style="width: 4em"></div>
							<div style="opacity: 0.3; padding-top: 5em; height: 13em; width: 5em; background-color: white; margin: 0.5em 0 0 0.5em; float: left;"><span style="font-size: 0.4em">Mammoot\GalleryBundle</span><img src="assets/mvc.svg" style="width: 4em"></div>
							<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin: 0.5em 0 0 0.5em; float: left;"><span style="font-size: 0.4em">Mammoot\HolodeckBundle</span><img src="assets/mvc.svg" style="width: 4em"></div>
							<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin: 0.5em 0 0 0.5em; float: left;"><span style="font-size: 0.4em">Vendor\BeerBundle</span><img src="assets/mvc.svg" style="width: 4em"></div>
							<div style="clear: both"></div>
						</div>
					</div>
				</div>
				
				<div style="font-size: 0.3em; float: left">
					<div style="width: 28em; height: 16em; background-color: red; padding: 0.5em">
						<div style="width: 27em; height: 1.5em; background-color: white">
							AppKernel & Autoloader
						</div>
						<div>
							<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin-top: 0.5em; float: left;"><span style="font-size: 0.4em;">Symfony2\CoreBundle</span><img src="assets/mvc.svg" style="width: 4em"></div>
							<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin: 0.5em 0 0 0.5em; float: left;"><span style="font-size: 0.4em">Mammoot\MainBundle</span><img src="assets/mvc.svg" style="width: 4em"></div>
							<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin: 0.5em 0 0 0.5em; float: left;"><span style="font-size: 0.4em">Mammoot\HolodeckBundle</span><img src="assets/mvc.svg" style="width: 4em"></div>
							<div style="padding-top: 5em; height: 13em; width: 5em; background-color: white; margin: 0.5em 0 0 0.5em; float: left;"><span style="font-size: 0.4em">Vendor\BeerBundle</span><img src="assets/mvc.svg" style="width: 4em"></div>
							<div style="opacity: 0.8; padding-top: 5em; height: 13em; width: 5em; background-color: white; margin: 0.5em 0 0 0.5em; float: left;"><span style="font-size: 0.4em">Mammoot\GalleryBundle</span><img src="assets/mvc.svg" style="width: 4em"></div>
							<div style="clear: both"></div>
						</div>
					</div>
				</div>
				<div style="clear: both"></div>
			</div>

			<div style="-webkit-box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.5); -moz-box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.5); box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.5); position: absolute; top: 5em; left: 50%; border: 0.15em solid red; padding-top: 5em; height: 13em; width: 5em; background-color: white; margin-left: -2.5em; float: left;"><span style="font-size: 0.4em">Mammoot\GalleryBundle</span><img src="assets/mvc.svg" style="width: 4em"></div>

		</div>
	</div>
</div>

<div class="pik-slide">
	<div class="center">
		<div class="center">
			<h1 class="between-title">Autoloading / Abhängigkeiten</h1>
		</div>
	</div>
</div>

<div class="pik-slide">
	<h2>Autoloading</h2>
	<ul>
		<li>PHP verfügt über kein Paketsystem.</li>
		<li>Abhängigkeiten von anderen Dateien müssen manuell gelöst werden.</li>
	</ul>
</div>

<div class="pik-slide">
	<h2>Autoloading</h2>
	<ul>
		<li>Frühere Lösungen:</li>
	</ul>
	<pre style="width: 16em; margin: auto" class="prettyprint">&lt;?php
include(&quot;../file1.php&quot;);
include(&quot;../file2.php&quot;);</pre>
<br>
<pre style="width: 19em; margin: auto" class="prettyprint">&lt;?php
require_once(&quot;../file1.php&quot;);
require_once(&quot;../file2.php&quot;);</pre>
</div>

<div class="pik-slide">
	<h2>Autoloading</h2>
	<ul>
		<li>Frühere Lösungen:</li>
	</ul>
	<pre style="width: 16em; margin: auto; opacity: 0.4" class="prettyprint">&lt;?php
include(&quot;../file1.php&quot;);
include(&quot;../file2.php&quot;);</pre>
<br>
<pre style="width: 19em; margin: auto; opacity: 0.4" class="prettyprint">&lt;?php
require_once(&quot;../file1.php&quot;);
require_once(&quot;../file2.php&quot;);</pre>
<img src="assets/PainButt.gif" style="position: absolute; width: 14em; top: 5em; left: 50%; margin-left: -7em; opacity: 0.8">
</div>

<div class="pik-slide">
	<h2>Autoloading</h2>
	<ul>
		<li>Neu in PHP 5.3
			<ul>
				<li>Namespaces</li>
				<li>Autoloading</li>
			</ul>
		</li>
	</ul>
</div>

<div class="pik-slide">
	<h2>Autoloading</h2>
	<ul>
		<li>Neu in PHP 5.3
			<ul>
				<li>Namespaces:</li>
			</ul>
		</li>
	</ul>
	<pre style="width: 20em; margin: auto;" class="prettyprint">&lt;?php
namespace "Mammoot\MeinRaum";</pre><br>
<pre style="width: 20em; margin: auto;" class="prettyprint">&lt;?php
use "Mammoot\MeinRaum";</pre>
</div>

<div class="pik-slide">
	<h2>Autoloading</h2>
	<ul>
		<li>Neu in PHP 5.3
			<ul>
				<li>Autoloading:</li>
			</ul>
		</li>
	</ul>
	<pre style="width: 31em; margin: auto;" class="prettyprint">&lt;?php
function __autoload($classname) {
	if (...)
		require $classname.'Bla'.'php';
	else
		require $classname.'php';
}</pre>
</div>

<div class="pik-slide">
	<h2>Autoloading</h2>
	<ul>
		<li>Symfony2 kombiniert beides
			<ul>
				<li>Der Namespace eines Bundles wird einmalig im Autoloader angemeldet.</li>
				<li>Anschließend reicht z.B.<br><code class="prettyprint">use "Mammoot\MeinRaum\Controller";</code> aus um die Controller aus MeinRaum zu importieren.</li>
			</ul>
		</li>
	</ul>
</div>

<div class="pik-slide">
	<h2 style="position: absolute">Unterm Rock</h2>
	<div class="center">
		<div class="center">
			<img src="assets/file-structure.jpg" style="width: 27em;">
		</div>
	</div>
</div>

<div class="pik-slide">
	<h2>Abhängigkeiten</h2>
	<ul>
		<li>Jedes Symfony2 Projekt ist abhängig von externen Bundles.
			<ul>
				<li>Externe Bundles müssen leicht integrierbar / desintegrierbar sein.</li>
				<li>Externe Bundles müssen leicht aktualisierbar sein (Bugfixes?).</li>
				<li>Externe Bundles dürfen sich nicht mit eigener Geschäftslogik mischen.</li>
			</ul>
		</li>
	</ul>
</div>

<div class="pik-slide">
	<h2>Abhängigkeiten</h2>
	<ul>
		<li>Alle Abhängigkeiten werden im deps-file eingetragen.</li>
		<li>Jedes Bundle wird mit seiner GitHub Adresse hinterlegt:</li>
	</ul>
	<pre style="width: 39em; font-size: 0.7em; margin: auto;" class="prettyprint">[SensioFrameworkExtraBundle]
    git=http://github.com/sensio/SensioFrameworkExtraBundle.git
    target=/bundles/Sensio/Bundle/FrameworkExtraBundle
    version=origin/2.0</pre>
    <ul>
    	<li>Definierte Abhängigkeiten können mit dem Kommando<br><code class="prettyprint">php bin/vendors install</code> gepflegt werden.</li>
    </ul>
</div>

<div class="pik-slide">
	<div class="center">
		<div class="center">
			<h1 class="between-title">Scaffolding</h1>
		</div>
	</div>
</div>

<div class="pik-slide">
	<h2>Scaffolding</h2>
	<ul>
		<li>Mit der Konsole lässt sich fast alles erzeugen:
			<ul>
				<li>Bundles</li>
				<li>Entities (Models) / Views / Controller</li>
				<li>CRUD Gerüst auf Basis einer Entity</li>
				<li>...</li>
			</ul>
		</li>
		<li>Generatoren können erweitert werden.</li>
	</ul>
</div>

<div class="pik-slide">
	<h2 style="position: absolute">Entity Generator</h2>
	<div class="center">
		<div class="center">
			<img src="assets/generator.jpg" style="width: 27em;">
		</div>
	</div>
</div>

<div class="pik-slide">
	<div class="center">
		<div class="center">
			<h1 class="between-title">Symfony2 von innen</h1>
		</div>
	</div>
</div>

<div class="pik-slide">
	<h2 style="position: absolute;">MVC for the win</h2>
	<div class="center">
		<div class="center">
			<img src="assets/mvc.svg" style="width: 29em">
		</div>
	</div>
</div>

<div class="pik-slide">
	<div class="center">
		<div class="center">
			<h1 class="between-title">Code</h1>
		</div>
	</div>
</div>

<div class="pik-slide">
	<div class="center">
		<div class="center">
			<h1 class="between-title">ORM - Persistenzebene</h1>
		</div>
	</div>
</div>

<div class="pik-slide">
	<h2>ORM - Persistenzebene</h2>
	<ul>
		<li>ORM: Object Relational Mapping!</li>
		<li>Zugriff auf Persistenzebene wird durch PHP-Objekte gekapselt.</li>
		<li>Statt selbst bspw. SQL-Queries abzusetzen, wird nur mit Datenobjekten gearbeitet.</li>
		<li>Das Persistenzmedium bleibt dabei komplett austauschbar.</li>
	</ul>
</div>

<div class="pik-slide">
	<h2>ORM - Die Brücke zwischen PHP und Datenbank</h2>
	<ul>
		<li>In PHP gibt es zwei etablierte ORM Bibliotheken:
			<ul>
				<li>Doctrine</li>
				<li>Propl</li>
			</ul>
		</li>
		<li>Beide können in Symfony2 verwendet werden.</li>
	</ul>
</div>

<div class="pik-slide">
	<h2>ORM - Entities</h2>
	<ul>
		<li>Um Datensätze zu repräsentieren werden POPOs (Plain Old PHP Objects) verwendet.</li>
		<li>Die Klassen dieser Objekte werden als Entities bezeichnet.</li>
		<li>Eine Entity ist lediglich die Schablone eines Datenobjektes und enthält keine Geschäftslogik!</li>
	</ul>
</div>

<div class="pik-slide">
	<h2>ORM - Associations</h2>
	<ul>
		<li>Entities können mit anderen Entities assoziert sein:
			<ul>
				<li>OneToOne</li>
				<li>OneToMany</li>
				<li>ManyToMany</li>
			</ul>
		</li>
	</ul>
</div>

<div class="pik-slide">
	<h2>ORM - Associations</h2>
	<ul>
		<li>Um assozierte Objekte abzurufen können die Getter-Methoden des übergeordneten Objektes genutzt werden:
			<ul>
				<li><code class="prettyprint">$motherShip->getShuttles();</code></li>
				<li>gibt eine Liste aller assoziierten Shuttles zurück.</li>
			</ul>
		</li>
	</ul>
</div>

<div class="pik-slide">
	<h2>ORM - Repositories</h2>
	<ul>
		<li>Entities die nicht über eine Assoziation gefunden werden können, werden über ihr Repository abgerufen werden.</li>
		<li>Diese Repositories lassen sich über einen EntityManager-Service instanziieren:</li>
	</ul>
	<pre style="width: 39em; font-size: 0.7em; margin: auto;" class="prettyprint">$em = $this->getDoctrine()->getEntityManager();
$repo = $em->getRepository('UfomammootUfoBundle:Mothership');</pre>
</div>

<div class="pik-slide">
	<h2>ORM - Repositories</h2>
	<ul>
		<li>Das Repository stellt find-Methoden bereit um bestimmte Objekte zu finden:</li>
	</ul>
	<pre style="width: 39em; font-size: 0.7em; margin: auto;" class="prettyprint">$repo->findAll() //Get all ships
$repo->find(17); //Get ship with ID 17
$repo->findByName("U.S.S. Mammoot"); //Get ship with name
                                       "U.S.S. Mammoot"</pre>
</div>

<div class="pik-slide">
	<h2>ORM - Arbeiten mit Entities</h2>
	<ul>
		<li>Ein Datenobjekt kann wie jedes Objekt über seine Getter und Setter verändert werden.</li>
		<li>Anschließend kann es dem Entity-Manager zum persistieren übergeben werden.</li>
	</ul>
	<pre style="width: 20em; margin: auto;" class="prettyprint">$ship->setName("U.S.S. Mam");
$em->persist($ship);
$em->flush();</pre>
	<ul>
		<li>Erst der flush()-Befehl sendet alle Änderungen an die Datenbank.</li>
	</ul>
</div>

<div class="pik-slide">
	<div class="center">
		<div class="center">
			<h1 class="between-title">Code</h1>
		</div>
	</div>
</div>

<div class="pik-slide">
	<div class="center">
		<div class="center">
			<h1 class="between-title">Service Layer</h1>
		</div>
	</div>
</div>

<div class="pik-slide">
	<h2>Service Layer</h2>
	<ul>
		<li>Einzelne Klassen lassen sich als Service anmelden und werden so über den ServiceContainer zugänglich gemacht.</li>
		<li>Beispiel: Der Doctrine EntityManager wird in Controllern als Service injeziert.</li>
		<li>Jede Art von Programmlogik die nicht in M, V, oder C gehört ist in der Regel ein Service.</li>
	</ul>
</div>

<div class="pik-slide">
	<div class="center">
		<div class="center">
			<h1 class="between-title">Code</h1>
		</div>
	</div>
</div>

<div class="pik-slide">
	<div class="center">
		<div class="center">
			<h1 class="between-title">Die Templatesprache Twig</h1>
		</div>
	</div>
</div>

<div class="pik-slide">
	<h2>Twig</h2>
	<ul>
		<li>Symfony2 bringt die hauseigene Templatesprache 'Twig' mit.</li>
		<li>Neben Twig kann auch jede andere Templateengine verwendet werden.</li>
		<li>Auch Templates in reinem PHP zu schreiben ist möglich.</li>
	</ul>
</div>

<div class="pik-slide">
	<h2>Twig</h2>
	<ul>
		<li>Vom Controller aus kann das Rendern einer View ausgelöst werden.</li>
		<li>Der Output der Templateengine kann entweder als String angenommen werden, oder direkt als Resonse an den Client geschickt werden.</li>
		<li>Dem Template können im Renderbefehl optional Variablen übergeben werden.</li>
	</ul>
</div>

<div class="pik-slide">
	<h2>Twig</h2>
	<ul>
		<li>Besonderheiten von Twig:
			<ul>
				<li>Templates können vererbt werden.</li>
				<li>Teilbereiche eines Templates können als Block definiert werden.</li>
				<li>Erbende Templates können diese Blöcke überschreiben.</li>
			</ul>
		</li>
	</ul>
</div>

<div class="pik-slide">
	<div class="center">
		<div class="center">
			<h1 class="between-title">Code</h1>
		</div>
	</div>
</div>

<div class="pik-slide">
	<h2>Die Spitze des Eisberges</h2>
	<ul>
		<li>Caching</li>
		<li>Asset-Management</li>
		<li>Profiler</li>
		<li>Access Control / Authorisation</li>
		<li>...</li>
	</ul>
</div>

<div class="pik-slide">
	<h2>Beer 'o clock</h2>
	<img src="assets/becks.png" style="width: 3em; top: 6em; left: 30%; margin-left: -1.5em; position: absolute;">
	<img src="assets/railgun.png" style="width: 14em; top: 8em; left: 60%; margin-left: -7em; position: absolute;">
</div>

<div id="footer">
	<table>
		<tr>
			<td>11.06.2012</td>
			<td>Philipp Nowinski</td>
			<td><span id="current-slide"></span> / <span id="total-slides"></span></td>
		</tr>
	</table>
</div>

</div>
<!-- End #Pik-presentation-container. Do not remove or rename! -->

</body>
</html>